(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{429:function(t,a,s){"use strict";s.r(a);var n=s(11),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"微应用结合扩展服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微应用结合扩展服务"}},[t._v("#")]),t._v(" 微应用结合扩展服务")]),t._v(" "),s("p",[t._v("在一张图中成功添加微应用和扩展服务后，可以在微应用中向扩展服务请求数据达到交互的效果")]),t._v(" "),s("h2",{attrs:{id:"一、添加微应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、添加微应用"}},[t._v("#")]),t._v(" 一、添加微应用")]),t._v(" "),s("p",[t._v("这里使用项目中自带的微应用模板mapgis-manager-extension作为示例，可参考里面的README，下面简单介绍关键步骤")]),t._v(" "),s("h3",{attrs:{id:"_1-1-修改微应用示例代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-修改微应用示例代码"}},[t._v("#")]),t._v(" 1.1 修改微应用示例代码")]),t._v(" "),s("h4",{attrs:{id:"_1-1-1-替换项目名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-替换项目名"}},[t._v("#")]),t._v(" 1.1.1 替换项目名")]),t._v(" "),s("p",[s("code",[t._v("package.json")]),t._v("的 name，将其中的 extension 进行替换")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mapgis-manager-extension"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("替换为")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mapgis-manager-apptest"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_1-1-2-替换路由基地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-替换路由基地址"}},[t._v("#")]),t._v(" 1.1.2 替换路由基地址")]),t._v(" "),s("p",[s("code",[t._v("src/router/index.js")]),t._v("的路由 base，将其中的 extension 进行替换")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("base"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__POWERED_BY_QIANKUN__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/psmap/manager/extension/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[t._v("替换为")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("base"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__POWERED_BY_QIANKUN__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/psmap/manager/apptest/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("h4",{attrs:{id:"_1-1-3-替换静态资源访问路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-替换静态资源访问路径"}},[t._v("#")]),t._v(" 1.1.3 替换静态资源访问路径")]),t._v(" "),s("p",[s("code",[t._v(".env")]),t._v("的"),s("code",[t._v("VUE_APP_CONTEXT_PATH")]),t._v("，将其中的 extension 进行替换")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("VUE_APP_CONTEXT_PATH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("/psmap/static/manager-apps/extension")]),t._v("\n")])])]),s("p",[t._v("替换为")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("VUE_APP_CONTEXT_PATH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("/psmap/static/manager-apps/apptest")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-2-集成到主应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-集成到主应用"}},[t._v("#")]),t._v(" 1.2 集成到主应用")]),t._v(" "),s("h4",{attrs:{id:"_1-2-1-新增微应用路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-新增微应用路由"}},[t._v("#")]),t._v(" 1.2.1 新增微应用路由")]),t._v(" "),s("h5",{attrs:{id:"_1-2-1-1-开发环境下微应用路由配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-1-开发环境下微应用路由配置"}},[t._v("#")]),t._v(" 1.2.1.1 开发环境下微应用路由配置")]),t._v(" "),s("p",[t._v("在《开发扩展/微应用路由配置》中，新增微应用")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("微应用名称")]),t._v(" "),s("th",[t._v("微应用入口")]),t._v(" "),s("th",[t._v("微应用路由")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("extension")]),t._v(" "),s("td",[t._v("//localhost:9000")]),t._v(" "),s("td",[t._v("/psmap/manager/apptest/")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("微应用名称：可以随意")]),t._v(" "),s("p",[t._v("微应用入口：确保端口正确，不需要添加前面的"),s("strong",[t._v("http:")]),t._v("，直接以**//**开头即可，采用完整地址也没问题")]),t._v(" "),s("p",[t._v("微应用路由：需要与路由基地址保持一致，最后的**/**，可加可不加")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/extension/新增微应用路由.png"),alt:"新增微应用路由"}}),t._v(" "),s("h5",{attrs:{id:"_1-2-1-2-运行环境下微应用路由配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-2-运行环境下微应用路由配置"}},[t._v("#")]),t._v(" 1.2.1.2 运行环境下微应用路由配置")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("打包：运行 yarn build 完成微应用打包")])]),t._v(" "),s("li",[s("p",[t._v("部署：按照"),s("code",[t._v("VUE_APP_CONTEXT_PATH=/psmap/static/manager-apps/apptest")]),t._v("指向的路径，将"),s("code",[t._v("dist")]),t._v("里面的内容拷贝到主应用包的"),s("code",[t._v("resource/static/manager-apps/apptest")]),t._v("下")])]),t._v(" "),s("li",[s("p",[t._v("配置：只需要在配置微应用路由的时候，修改微应用路由为"),s("code",[t._v("/psmap/static/manager-apps/apptest/index.html")]),t._v("，如下：")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("微应用名称")]),t._v(" "),s("th",[t._v("微应用入口")]),t._v(" "),s("th",[t._v("微应用路由")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("extension")]),t._v(" "),s("td",[t._v("/psmap/static/manager-apps/apptest/index.html")]),t._v(" "),s("td",[t._v("/psmap/manager/apptest/")])])])]),t._v(" "),s("h4",{attrs:{id:"_1-2-2-配置微应用菜单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-配置微应用菜单"}},[t._v("#")]),t._v(" 1.2.2 配置微应用菜单")]),t._v(" "),s("h5",{attrs:{id:"_1-2-2-1-配置带有子路由页面的菜单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-1-配置带有子路由页面的菜单"}},[t._v("#")]),t._v(" 1.2.2.1 配置带有子路由页面的菜单")]),t._v(" "),s("p",[t._v("模板提供了 2 个路由页面，一个是主页面/，一个是子页面/about，当我们想在主应用的一个菜单页面下展示所有的路由页面，可按如下进行配置：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("菜单类型")]),t._v(" "),s("th",[t._v("菜单名称")]),t._v(" "),s("th",[t._v("路由地址")]),t._v(" "),s("th",[t._v("组件路径")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("菜单")]),t._v(" "),s("td",[t._v("微应用")]),t._v(" "),s("td",[t._v("apptest")]),t._v(" "),s("td",[t._v("使用微应用组件")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("因微应用的路由基地址必须以主应用的路由基地址作为前缀，所以在这里只需要配置 apptest，注意，这里必须将这个菜单放到顶级，不然经过拼接后地址会不正确")])]),t._v(" "),s("p",[t._v("配置完成后刷新主页面，可通过点击《微应用》菜单访问，在页面内部，点击《About》可以在微应用内进行切换，同时，主应用的浏览器地址也会跟随变化")]),t._v(" "),s("h5",{attrs:{id:"_1-2-2-2-配置单独路由页面的菜单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-2-配置单独路由页面的菜单"}},[t._v("#")]),t._v(" 1.2.2.2 配置单独路由页面的菜单")]),t._v(" "),s("p",[t._v("这里以 about 页面为例，因访问它的完整地址是/psmap/manager/apptest/about，所以我们可以在主应用中先配置一个目录，路由为 extension，再在这个目录内配置一个菜单并设置它的路由为 about，实现单独展示微应用某个路由页面的功能")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("菜单类型")]),t._v(" "),s("th",[t._v("菜单名称")]),t._v(" "),s("th",[t._v("路由地址")]),t._v(" "),s("th",[t._v("组件路径")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("目录")]),t._v(" "),s("td",[t._v("微应用")]),t._v(" "),s("td",[t._v("apptest")]),t._v(" "),s("td",[t._v("/")])]),t._v(" "),s("tr",[s("td",[t._v("菜单")]),t._v(" "),s("td",[t._v("关于")]),t._v(" "),s("td",[t._v("about")]),t._v(" "),s("td",[t._v("使用微应用组件")])])])]),t._v(" "),s("p",[t._v("配置完成后刷新主页面，可通过点击《微应用/关于》菜单访问，直接就可以看到 about 页面的内容，同时，主应用的浏览器地址也会跟随变化")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/extension/新增微应用菜单1.png"),alt:"新增微应用菜单1"}}),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/extension/新增微应用菜单2.png"),alt:"新增微应用菜单2"}}),t._v(" "),s("h2",{attrs:{id:"二、添加扩展服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、添加扩展服务"}},[t._v("#")]),t._v(" 二、添加扩展服务")]),t._v(" "),s("p",[t._v("这里使用项目中自带的扩展服务模板mapgis-boot-extension作为示例，可参考里面的README，下面简单介绍关键步骤")]),t._v(" "),s("h3",{attrs:{id:"_2-1-开发时调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-开发时调试"}},[t._v("#")]),t._v(" 2.1 开发时调试")]),t._v(" "),s("ul",[s("li",[t._v("编译插件：可通过插件右键"),s("code",[t._v("Build Module")]),t._v("或"),s("code",[t._v("mvn clean compile")]),t._v("来进行编译，对于带依赖的，可在整个项目上执行"),s("code",[t._v("mvn clean package")])]),t._v(" "),s("li",[t._v("框架加载插件：需要在产品包"),s("code",[t._v("bin/startup-server.bat")]),t._v("中添加相关启动参数")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-Xms256m -Xmx1024m -XX:MetaspaceSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("128m -XX:MaxMetaspaceSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("512m -Dfile.encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("UTF-8 -DCONSOLE_CHARSET"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GBK -DCONSOLE_WITH_JANSI"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true -Dspring.output.ansi.enabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ALWAYS -Dxxx.home"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".\n\n@REM 追加下面一行，注意修改%plugins_dir%的值\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("%JAVA_OPTS% -Dpf4j.mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("development -Dpf4j.pluginsDir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("mapgis-boot-extension"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("mapgis-plugins -agentlib:jdwp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dt_socket,server"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("y,suspend"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("n,address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5005")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("这里的-Dpf4j.pluginsDir=指向的是插件所在的目录，对模板项目来说就是mapgis-plugins所在的目录")])]),t._v(" "),s("ul",[s("li",[t._v("插件开启远程调试：通过设置插件项目的Configurations可开启JVM远程调试（Add Remote JVM Debug）")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-部署后调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-部署后调试"}},[t._v("#")]),t._v(" 2.2 部署后调试")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("插件打包：执行mvn package可进行插件打包")])]),t._v(" "),s("li",[s("p",[t._v("插件部署：将打包好的插件xyz-plugin.jar或xyz-plugin.zip放到产品包下的的plugins目录内")])]),t._v(" "),s("li",[s("p",[t._v("框架加载插件：需要在产品包"),s("code",[t._v("bin/startup-server.bat")]),t._v("中添加相关启动参数")])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-Xms256m -Xmx1024m -XX:MetaspaceSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("128m -XX:MaxMetaspaceSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("512m -Dfile.encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("UTF-8 -DCONSOLE_CHARSET"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GBK -DCONSOLE_WITH_JANSI"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true -Dspring.output.ansi.enabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ALWAYS -Dxxx.home"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".\n\n@REM 追加下面一行，注意修改%plugins_dir%的值\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("%JAVA_OPTS% -agentlib:jdwp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dt_socket,server"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("y,suspend"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("n,address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5005")]),t._v("\n")])])]),s("ul",[s("li",[t._v("插件开启远程调试：通过设置插件项目的Configurations可开启JVM远程调试（Add Remote JVM Debug）")])]),t._v(" "),s("h3",{attrs:{id:"_2-3-访问扩展服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-访问扩展服务"}},[t._v("#")]),t._v(" 2.3 访问扩展服务")]),t._v(" "),s("p",[t._v("不管是开发时编译完插件还是打包后部署好插件，只要框架完成了插件的加载，就可以访问插件的服务了，对于demo-plugin插件来说，REST服务的访问基地址为"),s("code",[t._v("http://localhost:8015/psmap/rest/services/demo-plugin/ExtensionServer")])]),t._v(" "),s("blockquote",[s("p",[t._v("其中"),s("code",[t._v("demo-plugin")]),t._v("为插件id，对应plugin.properties或pom.xml文件中"),s("code",[t._v("plugin.id")]),t._v("的属性值")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/extension/扩展服务接口访问.png"),alt:"扩展服务接口访问"}}),t._v(" "),s("h2",{attrs:{id:"三、微应用访问扩展服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、微应用访问扩展服务"}},[t._v("#")]),t._v(" 三、微应用访问扩展服务")]),t._v(" "),s("p",[t._v("下面是一个简单的示例，在微应用示例项目中的About.vue页面中添加如下代码：")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("about"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("This is an about page"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-row")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-col")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":span")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token style-attr language-css"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('="')]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-right")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-input")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-col")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-col")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":span")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("getMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token style-attr language-css"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('="')]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("获取信息"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-col")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-row")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      message"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      axios\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8015/psmap/rest/services/demo-plugin/ExtensionServer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求成功时的处理")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求失败时的处理")]),t._v("\n          console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请求失败，错误信息：'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("请求成功即可获取相应接口数据，页面效果如下：")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/extension/微应用向扩展服务请求数据.png"),alt:"微应用向扩展服务请求数据"}}),t._v(" "),s("p",[t._v("你可以根据自己的需要，在扩展服务和微应用里面增加更多你想要的功能。")])])}),[],!1,null,null,null);a.default=e.exports}}]);